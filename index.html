<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì¸íŠ¸ë¡œ + ë©”ì¸ í™•ì¥í˜• í™”ë©´ (í˜ì´ë“œì—… ì•„ì›ƒ ìŠ¤í¬ë¡¤)</title>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-family: Arial, sans-serif;
        overflow: hidden;
        background-color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      /* ìŠ¤í”Œë˜ì‹œ ë° ì¸íŠ¸ë¡œ ìŠ¤íƒ€ì¼ (ë³€ê²½ ì—†ìŒ) */
      #splash {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }
      #splash img {
        width: 80%;
        max-width: 1000px;
        height: auto;
        transition: transform 1s ease, opacity 1s ease;
      }

      #intro-items {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: -20vh; /* ê¸°ì¡´ -200px ëŒ€ì‹  ë¹„ìœ¨ ë‹¨ìœ„ ì‚¬ìš© */
        margin-top: 15vh; /* ìœ„ìª½ ì—¬ë°±ë„ ë¹„ìœ¨ ë‹¨ìœ„ */
        opacity: 0;
        transition: opacity 1s ease;
        width: 80%;
        max-width: 500px;
      }

      #intro-items img {
        width: auto;
        height: 50vh;
        max-width: 80vw;
        opacity: 0;
        margin-top: -15vh; /* ê²¹ì¹˜ëŠ” ì •ë„ ì¡°ì ˆ */
        object-fit: contain;
        object-position: center;
      }
      /* ì„¸ë¡œí˜• í™”ë©´(ì•„ì´í° í¬í•¨)ì¼ ë•Œ ì‚´ì§ ìœ„ë¡œ */
      @media (orientation: portrait) {
        #splash img {
          transform: translateY(-7vh); /* 7% ìœ„ë¡œ ì˜¬ë¦¼ */
        }
        #intro-items {
          gap: -50vh; /* ê°„ê²©ì„ ì¡°ê¸ˆ ë” ì¢ê²Œ */
          margin-top: 17vh; /* ì‹œì‘ ìœ„ì¹˜ë¥¼ ë” ìœ„ë¡œ */
        }

        #intro-items img {
          height: 40vh; /* í™”ë©´ì— ë¹„í•´ ë„ˆë¬´ í¬ë©´ ì¤„ì´ê¸° */
          margin-top: -20vh; /* ê²¹ì¹¨ ì •ë„ë„ ë¹„ìœ¨ ë‹¨ìœ„ë¡œ */
        }
      }

      /* iPhone ì•ˆì „ì˜ì—­ ê°ì•ˆ */
      @supports (padding-bottom: env(safe-area-inset-bottom)) {
        #splash {
          padding-bottom: calc(env(safe-area-inset-bottom) + 10px);
        }
      }
      @keyframes fadeInUp {
        0% {
          opacity: 0;
          transform: translate3d(0, 100%, 0);
        }
        100% {
          opacity: 1;
          transform: translateZ(0);
        }
      }
      .fadeInUp {
        animation: fadeInUp 2s forwards;
      }
      .fade-out {
        opacity: 0 !important;
      }
      @keyframes slideOutLeft {
        0% {
          transform: translateX(0);
          opacity: 1;
        }
        100% {
          transform: translateX(-100%);
          opacity: 0;
        }
      }
      @media (orientation: portrait) {
        @keyframes slideOutLeft {
          0% {
            transform: translate(-0%, -7vh);
            opacity: 1;
          }
          100% {
            transform: translate(-100%, -7vh);
            opacity: 0;
          }
        }
      }
      .slideOutLeft {
        animation: slideOutLeft 1s ease forwards;
      }

      #main {
        opacity: 0;
        pointer-events: none;
        /* (ìˆ˜ì •) transform ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•´ transition ì†ì„± ì¶”ê°€ */
        transition: opacity 1s ease, transform 1s ease;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      #main.visible {
        opacity: 1;
      }

      /* (ìˆ˜ì •) ìœ„ë¡œ ì˜¬ë¼ê°€ëŠ” transform ì†ì„± ì¶”ê°€ */
      #main.fading-out {
        opacity: 0;
        transform: translateY(-50px); /* ìœ„ë¡œ 50px ì›€ì§ì´ë©° ì‚¬ë¼ì§ */
      }

      #top-panel {
        flex: 1;
        background-color: white;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        padding: 0 40px;
        box-sizing: border-box;
        position: relative;
      }

      #logo-img {
        height: 60%;
        width: auto;

        margin-left: -10px;
      }

      #top-right-icon {
        position: absolute;
        right: 40px;
        top: 50%;
        transform: translateY(-50%);
        height: 50%;
        width: auto;
      }

      #bottom-panel {
        flex: 3.5;
        display: flex;
        width: 100%;
      }

      .section {
        position: relative;
        overflow: hidden;
        cursor: pointer;
        flex-grow: 1;
        flex-basis: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-size: 2rem;
        font-weight: bold;
        transition: flex-grow 0.8s cubic-bezier(0.4, 0, 0.2, 1),
          background-color 0.8s ease;
      }
      .cover-image {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1;
        opacity: 1;
        transition: opacity 0.6s ease;
      }

      .section-icon {
        position: absolute;
        top: 30px;
        left: 30px;
        z-index: 3;
        opacity: 1;
        transition: opacity 0.6s ease;
      }

      #sec1 .section-icon {
        width: 129.5px;
        height: 60.9px;
      }
      #sec2 .section-icon {
        width: 77px;
        height: 60.2px;
      }
      #sec3 .section-icon {
        width: 162.4px;
        height: 39.2px;
      }

      #main[class*="expanded-"] .cover-image {
        opacity: 0;
        pointer-events: none;
      }

      #main[class*="expanded-"] .section-icon {
        opacity: 0;
      }

      #main.expanded-1 #sec1 .section-icon,
      #main.expanded-2 #sec2 .section-icon,
      #main.expanded-3 #sec3 .section-icon {
        opacity: 1;
      }

      .section .video {
        position: absolute;
        width: 100%;
        height: 100%; 
        object-fit: cover;
        opacity: 0;
        transition: opacity 0.8s ease;
        z-index: 0;
      }
      .active .video {
        opacity: 1;
      }

      .rotating-image {
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 0;
        opacity: 0;
        transition: opacity 0.8s ease;
      }

      .rotating-image.visible {
        opacity: 1;
      }

      .section span,
      .section .content-text {
        position: relative;
        z-index: 2;
        transition: opacity 0.5s ease;
      }
      .content-text {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
        box-sizing: border-box;
        opacity: 0;
        width: 90%;
        height: 90%;
        text-align: center;
      }
      .content-text h2 {
        margin-top: 0;
      }

      #main.expanded-1 #sec1 {
        flex-grow: 8;
      }
      #main.expanded-1 #sec2 {
        flex-grow: 4;
        background-color: #ff5f46;
      }
      #main.expanded-1 #sec3 {
        flex-grow: 1;
        background-color: #000000;
      }
      #main.expanded-1 #sec2 span {
        opacity: 0;
      }
      #main.expanded-1 #sec2 .content-text {
        opacity: 1;
      }

      #main.expanded-2 #sec1 {
        flex-grow: 2;
        background-color: #000000;
      }
      #main.expanded-2 #sec2 {
        flex-grow: 8;
      }
      #main.expanded-2 #sec3 {
        flex-grow: 2;
        background-color: #ffd891;
      }

      #main.expanded-3 #sec1 {
        flex-grow: 1;
        background-color: #000000;
        opacity: 0.6;
      }
      #main.expanded-3 #sec2 {
        flex-grow: 3;
        background-color: #000000;
      }
      #main.expanded-3 #sec3 {
        flex-grow: 8;
      }
      @media (orientation: portrait) {
        #logo-img {
          height: auto;
          width: auto;
        }
        #top-right-icon {
          height: auto;
          width: auto;
        }
        #top-panel {
          max-height: 300px;
        }
        #bottom-panel {
          flex-direction: column;
        }
        .cover-image {
          width: 50%;
        }
        .section .video {
          height: 80%;
        }
      }
    </style>
  </head>
  <body>
    <div id="splash">
      <img src="images/intro_logo.gif" alt="ë¡œê³  ì• ë‹ˆë©”ì´ì…˜" />
    </div>

    <div id="intro-items">
      <img id="intro_focus" src="images/focus-1.gif" alt="Intro Focus" />
      <img id="intro_roll" src="images/roll-1.gif" alt="Intro Roll" />
      <img id="intro_play" src="images/play-1.gif" alt="Intro Play" />
    </div>

    <div id="main">
      <div id="top-panel">
        <img src="images/main_logo.png" alt="ë¡œê³ " id="logo-img" />
        <img
          src="images/main_pentagon.png"
          alt="ìƒˆë¡œìš´ ì•„ì´ì½˜"
          id="top-right-icon"
        />
      </div>

      <div id="bottom-panel">
        <div class="section" id="sec1">
          <img src="images/focus_text.png" alt="ì•„ì´ì½˜1" class="section-icon" />
          <img src="images/main_focus.png" alt="1ë²ˆ êµ¬ì—­" class="cover-image" />
          <img class=video src="images/focus_vid.gif"></img>
        </div>
        <div class="section" id="sec2">
          <img src="images/roll_text.png" alt="ì•„ì´ì½˜2" class="section-icon" />
          <img src="images/main_roll.png" alt="2ë²ˆ êµ¬ì—­" class="cover-image" />
          <img class=video src="images/roll_vid.gif"></img>
        </div>
        <div class="section" id="sec3">
          <img
            src="images/seekoo_text.png"
            alt="ì•„ì´ì½˜3"
            class="section-icon"
          />
          <img
            src="images/main_seekoo.png"
            alt="3ë²ˆ êµ¬ì—­"
            class="cover-image"
          />
          <img
            src="images/main_seekooimg_right.png"
            alt="3ë²ˆ êµ¬ì—­ ì´ë¯¸ì§€1"
            class="rotating-image"
          />
          <img
            src="images/main_seekooimg_left.png"
            alt="3ë²ˆ êµ¬ì—­ ì´ë¯¸ì§€2"
            class="rotating-image"
          />
        </div>
      </div>
    </div>

    <script>
      window.addEventListener("load", function () {
        const splash = document.getElementById("splash");
        const splashImg = splash.querySelector("img");
        const introDiv = document.getElementById("intro-items");
        const main = document.getElementById("main");
        const items = ["intro_focus", "intro_roll", "intro_play"];

        setTimeout(() => {
          splashImg.classList.add("slideOutLeft");
          setTimeout(() => {
            splash.style.display = "none";
            introDiv.style.opacity = 1;

            items.forEach((id, index) => {
              setTimeout(() => {
                document.getElementById(id).classList.add("fadeInUp");
              }, index * 3000);
            });

            setTimeout(() => {
              introDiv.classList.add("fade-out");
              setTimeout(() => {
                introDiv.style.display = "none";
                main.classList.add("visible");
                main.style.pointerEvents = "auto";
              }, 1000);
            }, items.length * 3000 + 2000);
          }, 1000);
        }, 2500);
      });

      const main = document.getElementById("main");
      const sections = document.querySelectorAll(".section");
      let imageInterval = null;

      sections.forEach((sec, index) => {
        sec.addEventListener("click", () => {
          const thisSectionClass = `expanded-${index + 1}`;
          if (main.classList.contains(thisSectionClass)) {
            if (isScrolling) return;
            isScrolling = true;
            main.classList.add("fading-out");

            let targetUrl = "";

            if (sec.id === "sec1") {
              targetUrl = "solar.html";
            } else if (sec.id === "sec2") {
              targetUrl = "move.html";
            } else if (sec.id === "sec3") {
              targetUrl = "seekoo.html";
            }
            setTimeout(() => {
              window.location.href = targetUrl;
            }, 1000);
          } else if (main.className.includes("expanded-")) {
            resetSections(); // ë‹¤ë¥¸ ì„¹ì…˜ì´ í™•ì¥ë˜ì–´ ìˆìœ¼ë©´ ì¼ë‹¨ ì´ˆê¸°í™”
          } else {
            sec.classList.add("active");
            if (sec.id === "sec1" || sec.id === "sec2") {
              const vid = sec.querySelector("video");
              if (vid)
                vid.play().catch((e) => console.error("Video play error:", e));
            }
            if (sec.id === "sec3") {
              const images = sec.querySelectorAll(".rotating-image");
              if (images.length > 0) {
                images[0].classList.add("visible");
                imageInterval = setInterval(() => {
                  images[0].classList.toggle("visible");
                  images[1].classList.toggle("visible");
                }, 5000);
              }
            }
            main.classList.add(thisSectionClass);
          }
        });
      });

      function resetSections() {
        clearInterval(imageInterval);
        main.className = "visible";

        sections.forEach((s) => {
          s.classList.remove("active");
          const video = s.querySelector("video");
          if (video) {
            video.pause();
            video.currentTime = 0;
          }

          const rotatingImages = s.querySelectorAll(".rotating-image");
          rotatingImages.forEach((img) => img.classList.remove("visible"));
        });
      }

      let isScrolling = false;
      window.addEventListener("load", function () {
        const splash = document.getElementById("splash");
        const splashImg = splash.querySelector("img");
        const introDiv = document.getElementById("intro-items");
        const main = document.getElementById("main");
        const items = ["intro_focus", "intro_roll", "intro_play"];
        if (window.location.hash === "#main") {
          splash.style.display = "none";
          introDiv.style.display = "none";
          main.classList.add("visible");
          main.style.pointerEvents = "auto";
        } else {
          setTimeout(() => {
            splashImg.classList.add("slideOutLeft");
            setTimeout(() => {
              splash.style.display = "none";
              introDiv.style.opacity = 1;
              items.forEach((id, index) => {
                setTimeout(() => {
                  document.getElementById(id).classList.add("fadeInUp");
                }, index * 3000);
              });
              setTimeout(() => {
                introDiv.classList.add("fade-out");
                setTimeout(() => {
                  introDiv.style.display = "none";
                  main.classList.add("visible");
                  main.style.pointerEvents = "auto";
                }, 1000);
              }, items.length * 3000 + 2000);
            }, 1000);
          }, 2500);
        }
      });

      window.addEventListener("wheel", function (event) {
        if (!main.className.includes("expanded-") && !isScrolling) {
          isScrolling = true;

          main.classList.add("fading-out");

          setTimeout(() => {
            window.location.href = "background.html";
          }, 1000);
        }
      });

      // ğŸ“± ëª¨ë°”ì¼ í„°ì¹˜ ê°ì§€ (ìœ„ë¡œ ìŠ¤ì™€ì´í”„ ì‹œ background.html ì´ë™)
      let touchStartY = 0;
      let touchEndY = 0;

      window.addEventListener("touchstart", function (e) {
        touchStartY = e.touches[0].clientY;
      });

      window.addEventListener("touchend", function (e) {
        touchEndY = e.changedTouches[0].clientY;

        // ìœ„ë¡œ ìŠ¤ì™€ì´í”„ (touchStartY > touchEndY)
        if (
          touchStartY - touchEndY > 50 &&
          !isScrolling &&
          !main.className.includes("expanded-")
        ) {
          isScrolling = true;
          main.classList.add("fading-out");

          setTimeout(() => {
            window.location.href = "background.html";
          }, 1000);
        }
      });
      // ğŸ¬ ëª¨ë°”ì¼ì—ì„œ ì˜ìƒì´ ëë‚˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
      document.addEventListener("DOMContentLoaded", function () {
        const isMobile = /Mobi|Android/i.test(navigator.userAgent);
        if (!isMobile) return; // ëª¨ë°”ì¼ì´ ì•„ë‹ ë•ŒëŠ” ì‹¤í–‰ X

        const videos = document.querySelectorAll(
          "#bottom-panel .section video"
        );

        videos.forEach((video) => {
          video.addEventListener("ended", function () {
            let targetUrl = "";
            const parent = video.closest(".section");

            if (parent.id === "sec1") targetUrl = "solar.html";
            else if (parent.id === "sec2") targetUrl = "move.html";
            else if (parent.id === "sec3") targetUrl = "seekoo.html";

            if (targetUrl) {
              // ë¶€ë“œëŸ½ê²Œ ì‚¬ë¼ì§€ê²Œ
              document.getElementById("main").classList.add("fading-out");
              setTimeout(() => {
                window.location.href = targetUrl;
              }, 800);
            }
          });
        });
      });
    </script>
  </body>
</html>
